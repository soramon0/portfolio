import{s as Q,n as F,f as V}from"../chunks/scheduler.a6abe46d.js";import{S as J,i as K,g as f,s as w,y as G,h as p,f as m,c as L,j as _,z as R,k as b,x as h,a as T,A as W,B as X}from"../chunks/index.1f0ff772.js";import{r as U,d as Y}from"../chunks/index.70dc4a08.js";import{S as Z,u as $,v as tt,a as B,w as et,x as st}from"../chunks/context.c20ad9ae.js";class nt extends Z{constructor(t,s){super(),this.client=t,this.setOptions(s),this.bindMethods(),this.updateResult()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){var s;const e=this.options;this.options=this.client.defaultMutationOptions(t),$(e,this.options)||this.client.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.currentMutation,observer:this}),(s=this.currentMutation)==null||s.setOptions(this.options)}onUnsubscribe(){if(!this.hasListeners()){var t;(t=this.currentMutation)==null||t.removeObserver(this)}}onMutationUpdate(t){this.updateResult();const s={listeners:!0};t.type==="success"?s.onSuccess=!0:t.type==="error"&&(s.onError=!0),this.notify(s)}getCurrentResult(){return this.currentResult}reset(){this.currentMutation=void 0,this.updateResult(),this.notify({listeners:!0})}mutate(t,s){return this.mutateOptions=s,this.currentMutation&&this.currentMutation.removeObserver(this),this.currentMutation=this.client.getMutationCache().build(this.client,{...this.options,variables:typeof t<"u"?t:this.options.variables}),this.currentMutation.addObserver(this),this.currentMutation.execute()}updateResult(){const t=this.currentMutation?this.currentMutation.state:tt(),s={...t,isLoading:t.status==="loading",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset};this.currentResult=s}notify(t){B.batch(()=>{if(this.mutateOptions&&this.hasListeners()){if(t.onSuccess){var s,e,i,r;(s=(e=this.mutateOptions).onSuccess)==null||s.call(e,this.currentResult.data,this.currentResult.variables,this.currentResult.context),(i=(r=this.mutateOptions).onSettled)==null||i.call(r,this.currentResult.data,null,this.currentResult.variables,this.currentResult.context)}else if(t.onError){var u,d,l,n;(u=(d=this.mutateOptions).onError)==null||u.call(d,this.currentResult.error,this.currentResult.variables,this.currentResult.context),(l=(n=this.mutateOptions).onSettled)==null||l.call(n,void 0,this.currentResult.error,this.currentResult.variables,this.currentResult.context)}}t.listeners&&this.listeners.forEach(({listener:a})=>{a(this.currentResult)})})}}function it(){return et()}function rt(o,t,s){const e=st(o,t,s),i=it();let r=new nt(i,e),u;U(r).subscribe(n=>{r=n,u=(a,g)=>{r.mutate(a,g).catch(at)},r.setOptions(e)});const d=U(r.getCurrentResult(),n=>r.subscribe(B.batchCalls(a=>n(a)))),{subscribe:l}=Y(d,n=>({...n,mutate:u,mutateAsync:n.mutate}));return{subscribe:l}}function at(){}function ot(){return"/api"}function lt(o){let t,s="Login";return{c(){t=f("span"),t.textContent=s},l(e){t=p(e,"SPAN",{"data-svelte-h":!0}),R(t)!=="svelte-sdljcx"&&(t.textContent=s)},m(e,i){T(e,t,i)},d(e){e&&m(t)}}}function ut(o){let t,s="Loading...";return{c(){t=f("span"),t.textContent=s},l(e){t=p(e,"SPAN",{"data-svelte-h":!0}),R(t)!=="svelte-1qkwv10"&&(t.textContent=s)},m(e,i){T(e,t,i)},d(e){e&&m(t)}}}function ct(o){let t,s,e,i,r,u="Admin sign in",d,l,n,a,g='<label for="email">Email</label> <input type="email" id="email" required=""/>',A,x,q='<label for="password">Password</label> <input type="password" id="password" required=""/>',k,M,E,I,j;function N(c,y){return c[0].isLoading?ut:lt}let S=N(o),v=S(o);return{c(){t=f("meta"),s=w(),e=f("main"),i=f("section"),r=f("h1"),r.textContent=u,d=w(),l=f("form"),n=f("fieldset"),a=f("div"),a.innerHTML=g,A=w(),x=f("div"),x.innerHTML=q,k=w(),M=f("button"),v.c(),this.h()},l(c){const y=G("svelte-10ur6l4",document.head);t=p(y,"META",{name:!0,content:!0}),y.forEach(m),s=L(c),e=p(c,"MAIN",{class:!0});var P=_(e);i=p(P,"SECTION",{class:!0});var O=_(i);r=p(O,"H1",{class:!0,"data-svelte-h":!0}),R(r)!=="svelte-17jrd9i"&&(r.textContent=u),d=L(O),l=p(O,"FORM",{class:!0});var H=_(l);n=p(H,"FIELDSET",{class:!0});var C=_(n);a=p(C,"DIV",{class:!0,"data-svelte-h":!0}),R(a)!=="svelte-1gxx8b9"&&(a.innerHTML=g),A=L(C),x=p(C,"DIV",{class:!0,"data-svelte-h":!0}),R(x)!=="svelte-1rhzwp9"&&(x.innerHTML=q),k=L(C),M=p(C,"BUTTON",{type:!0});var D=_(M);v.l(D),D.forEach(m),C.forEach(m),H.forEach(m),O.forEach(m),P.forEach(m),this.h()},h(){document.title="sora.mon0 | Authenticate",b(t,"name","description"),b(t,"content","sora.mon0's full stack portfolio website"),b(r,"class","text-4xl"),b(a,"class","flex items-left gap-2 flex-col"),b(x,"class","flex items-left gap-2 flex-col"),b(M,"type","submit"),b(n,"class","space-y-4"),n.disabled=E=o[0].isLoading,b(l,"class","block"),b(i,"class","space-y-4 sm:space-y-8"),b(e,"class","h-screen p-4 sm:p-6 flex items-center justify-center")},m(c,y){h(document.head,t),T(c,s,y),T(c,e,y),h(e,i),h(i,r),h(i,d),h(i,l),h(l,n),h(n,a),h(n,A),h(n,x),h(n,k),h(n,M),v.m(M,null),I||(j=W(l,"submit",X(o[2])),I=!0)},p(c,[y]){S!==(S=N(c))&&(v.d(1),v=S(c),v&&(v.c(),v.m(M,null))),y&1&&E!==(E=c[0].isLoading)&&(n.disabled=E)},i:F,o:F,d(c){c&&(m(s),m(e)),m(t),v.d(),I=!1,j()}}}function z(o,t){return o.elements.namedItem(t)}function dt(o,t,s){let e;const i=rt({mutationKey:["auth:login"],mutationFn:async u=>await(await fetch(`${ot()}/v1/auth/login`,{method:"POST",body:JSON.stringify(u),credentials:"include",headers:{"Content-Type":"application/json"}})).json()});return V(o,i,u=>s(0,e=u)),[e,i,u=>{var a,g;const d=u.target,l=(a=z(d,"email"))==null?void 0:a.value,n=(g=z(d,"password"))==null?void 0:g.value;e.mutate({email:l,password:n})}]}class bt extends J{constructor(t){super(),K(this,t,dt,ct,Q,{})}}export{bt as component};
